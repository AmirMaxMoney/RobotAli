<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RobotAli</title>
<style>
body {
  margin:0;
  font-family: Aviny, sans-serif;
  background:#0f172a;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#container{
  width:95%;
  max-width:600px;
  background:#1e293b;
  border-radius:15px;
  padding:15px;
  display:flex;
  flex-direction:column;
  height:85vh;
}
#chat{
  flex:1;
  overflow-y:auto;
  padding:10px;
  border-radius:8px;
  background:#334155;
  margin-bottom:10px;
}
.msg{
  margin:8px 0;
  padding:10px;
  border-radius:7px;
  max-width:80%;
}
.user{background:#2563eb; align-self:flex-end;}
.bot{background:#475569; align-self:flex-start;}
#inputBar{display:flex; gap:5px;}
input{
  flex:1;
  padding:10px;
  border:none;
  border-radius:7px;
  outline:none;
}
button{
  padding:10px 14px;
  border:none;
  border-radius:7px;
  background:#22c55e;
  color:white;
  cursor:pointer;
}
#apiBox{
  margin-bottom:8px;
  display:flex;
  gap:5px;
}
#apiKey{
  flex:1;
  padding:6px;
  border:none;
  border-radius:6px;
}
</style>
</head>
<body>

<div id="container">
  <div id="apiBox">
    <input id="apiKey" type="password" placeholder="API Key Ú¯ÙˆÚ¯Ù„ØŒ DeepSeek ÛŒØ§ Grok Ø±Ùˆ Ø§ÛŒÙ†Ø¬Ø§ ØªØ§ÛŒÙ¾ Ú©Ù†">
    <button onclick="saveKey()">Ø°Ø®ÛŒØ±Ù‡</button>
  </div>

  <div id="chat"></div>

  <div id="inputBar">
    <input id="msg" placeholder="Ø¨Ø²Ù† Ø¨Ø¨ÛŒÙ† Ú†ÛŒ Ù…ÛŒÚ¯ÛŒ ğŸ˜">
    <button onclick="sendMsg()">Ø§Ø±Ø³Ø§Ù„</button>
  </div>
</div>

<script>
let API_KEY = "";

function saveKey(){
  API_KEY = document.getElementById('apiKey').value;
  alert("Ú©Ù„ÛŒØ¯ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯ âœ… Ø­Ø§Ù„Ø§ Ú†Øª Ú©Ù† Ø¨Ø±ÛŒÙ…!");
}

function addMsg(text, sender){
  const chat = document.getElementById('chat');
  const div = document.createElement('div');
  div.className = `msg ${sender}`;
  div.textContent = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

async function sendMsg(){
  const input = document.getElementById('msg');
  const text = input.value.trim();
  if(!text) return;
  addMsg(text, "user");
  input.value = "";

  if(!API_KEY){
    addMsg("Ø¯Ø§Ø¯Ø§Ø´ Ø§ÙˆÙ„ API Ø±Ùˆ Ø¨Ø°Ø§Ø± Ø¨Ø§Ù„Ø§ â˜ï¸", "bot");
    return;
  }

  addMsg("ØµØ¨Ø± Ú©Ù† Ø¨Ø¨ÛŒÙ†Ù… Ú†ÛŒ Ù…ÛŒØ´Ù‡ ğŸ˜...", "bot");

  try {
    const res = await fetch("https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=" + API_KEY, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body: JSON.stringify({
        contents: [{role:"user", parts:[{text}]}]
      })
    });
    const data = await res.json();
    const reply = data.candidates?.[0]?.content?.parts?.[0]?.text;
    addMsg(reply || "Ú†ÛŒ Ø¨Ú¯Ù… ÙˆØ§Ù„Ù„Ù‡ Ø¬ÙˆØ§Ø¨ Ù†Ú¯Ø±ÙØªÙ… ğŸ¤·â€â™‚ï¸", "bot");

  } catch(e){
    addMsg("Ø®Ø·Ø§ Ø¯Ø§Ø¯! ÙÚ© Ú©Ù†Ù… Ø§ÛŒÙ†ØªØ±Ù†Øª ÛŒØ§ API Ù…Ø´Ú©Ù„ Ø¯Ø§Ø±Ù‡ ğŸ˜¬", "bot");
  }
}
</script>

</body>
</html>